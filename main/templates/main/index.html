{% extends "base.html" %}
{% load static %}

{% block title %}Baizhigit Mebel | Мебель на Заказ в Астане{% endblock %}

{% block extra_head %}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" xintegrity="sha512-YOUR_FONT_AWESOME_INTEGRITY_HASH" crossorigin="anonymous" referrerpolicy="no-referrer" />
    {# УДАЛЕНО: <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script> #} {# Bootstrap JS уже в base.html #}

    <link rel="stylesheet" href="{% static 'css/index.css' %}">
{% endblock %}

{% block content %}
    <section class="hero-section">
        <div class="hero-overlay"></div>
        <div class="hero-content text-center">
            <h1 class="hero-title">{{ site_settings.main_index_text|safe }}</h1>
            <p class="hero-subtitle">{{ site_settings.second_index_text|safe }}</p>

            <div class="hero-actions">
                <a href="#consultation-form" class="btn btn-primary-custom hero-btn">Получить консультацию</a>
                {% if promotions %}
                    <div class="promo-sticker-wrapper">
                        <div class="promo-sticker mt-4">
                            <i class="fas fa-tags promo-icon"></i>
                            <span class="promo-text">{{ site_settings.promo_text }}</span>
                            <a href="{% url 'promotions:promotions_list' %}" class="promo-link">Подробнее</a> {# Ссылка на отдельную страницу акций #}
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
        <div class="hero-images">
            <img src="https://images.unsplash.com/photo-1616137303871-05ce745f9cdb?q=80" alt="Современная мебель в гостиной" class="hero-img-main">
            <img src="https://plus.unsplash.com/premium_photo-1675616563084-63d1f129623d?w=600&q=80&auto=format&fit=crop" alt="Элегантная спальня" class="hero-img-secondary-1 d-none d-md-block">
            <img src="https://images.unsplash.com/photo-1507089947368-19c1da9775ae?w=600&q=80&auto=format&fit=crop" alt="Уютная кухня" class="hero-img-secondary-2 d-none d-md-block">
        </div>
    </section>

    <section class="about-section text-center">
        <div class="container">
            <h2 class="section-title">О нас: Секреты Вашего Уютного Дома</h2>
            <p class="section-subtitle">Мы создаем не просто мебель, а атмосферу, отражающую вашу индивидуальность.</p>

            <div class="feature-grid">
                <div class="feature-item"> <div class="feature-card">
                        <i class="fas fa-warehouse feature-icon"></i>
                        <h3>Крупнейшее Производство</h3>
                        <p>Наши цеха площадью 2700 кв. м – это гарантия масштаба и эффективности.</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-card">
                        <i class="fas fa-hammer feature-icon"></i>
                        <h3>Опыт с 2008 года</h3>
                        <p>Более {{ site_settings.business_age }} лет мы успешно производим высококачественную мебель для дома.</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-card">
                        <i class="fas fa-city feature-icon"></i>
                        <h3>1500+ Обустроенных Квартир</h3>
                        <p>Мы гордимся тем, что обставили более полутора тысяч уютных домов и квартир.</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-card">
                        <i class="fas fa-tools feature-icon"></i>
                        <h3>Мастера с {{ site_settings.business_age }}-летним Стажем</h3>
                        <p>Команда профессионалов с многолетним опытом гарантирует безупречное качество каждого изделия.</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-card">
                        <i class="fas fa-paint-brush feature-icon"></i>
                        <h3>Бесплатный Дизайн и 3D Проект</h3>
                        <p>Наш дизайнер приедет к вам, бесплатно создаст 3D-проект вашей будущей мебели.</p>
                    </div>
                </div>
                <div class="feature-item">
                    <div class="feature-card">
                        <i class="fas fa-check-circle feature-icon"></i>
                        <h3>Гарантия Качества</h3>
                        <p>Мы используем только проверенные материалы и современное оборудование для долговечности.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="cta-portfolio-section py-5 bg-light-gray">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-6 mb-4 mb-lg-0 text-center text-lg-start">
                    <h2 class="section-title mb-3">Ознакомьтесь с Нашим Портфолио</h2>
                    <p class="section-subtitle mb-4">Вдохновитесь нашими реализованными проектами и найдите идеи для своего интерьера.</p>
                    <a href="{% url "orders:order_list" %}" class="btn btn-secondary-custom">Перейти в Портфолио</a>
                </div>
                <div class="col-lg-6">
                    <div class="portfolio-grid">
                        <img
                            src="https://plus.unsplash.com/premium_photo-1676320514018-2f5b7c5a701f?w=600&q=80&auto=format&fit=crop"
                            alt="Проект портфолио 1"
                            class="portfolio-thumb"
                            loading="lazy">

                        <img
                            src="https://plus.unsplash.com/premium_photo-1676320514025-4caf7748f983?w=600&q=80&auto=format&fit=crop"
                            alt="Проект портфолио 2"
                            class="portfolio-thumb d-none d-md-block"
                            loading="lazy">

                        <img
                            src="https://plus.unsplash.com/premium_photo-1670076720537-bde4646fa221?w=600&q=80&auto=format&fit=crop"
                            alt="Проект портфолио 3"
                            class="portfolio-thumb d-none d-md-block"
                            loading="lazy">

                        <img
                            src="https://plus.unsplash.com/premium_photo-1670076505559-53f07006d89b?w=600&q=80&auto=format&fit=crop"
                            alt="Проект портфолио 4"
                            class="portfolio-thumb d-none d-md-block"
                            loading="lazy">

                        <img
                            src="https://plus.unsplash.com/premium_photo-1675615949714-083a1a313224?w=600&q=80&auto=format&fit=crop"
                            alt="Проект портфолио 5"
                            class="portfolio-thumb d-none d-md-block"
                            loading="lazy">

                        <img
                            src="https://plus.unsplash.com/premium_photo-1674676471339-fe57f0056992?w=600&q=80&auto=format&fit=crop"
                            alt="Проект портфолио 6"
                            class="portfolio-thumb d-none d-md-block"
                            loading="lazy">
                    </div>
                </div>

            </div>
        </div>
    </section>

    <section class="why-choose-us-section py-5">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="section-title">Почему Выбирают Baizhigit Mebel?</h2>
                <p class="section-subtitle">Сочетание традиций мастерства и современных технологий.</p>
            </div>
            <div class="row align-items-center">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <img src="https://images.unsplash.com/photo-1653974123446-3eeff06fb6fb?w=600&q=80&auto=format&fit=crop" alt="Качественная мебель" class="img-fluid rounded shadow-lg">
                </div>
                <div class="col-lg-6">
                    <ul class="why-list">
                        <li><i class="fas fa-star list-icon"></i> Высокое качество материалов и фурнитуры</li>
                        <li><i class="fas fa-truck-moving list-icon"></i> Собственная доставка и профессиональная установка</li>
                        <li><i class="fas fa-users list-icon"></i> Индивидуальный подход к каждому клиенту</li>
                        <li><i class="fas fa-lightbulb list-icon"></i> Креативные и функциональные дизайнерские решения</li>
                        <li><i class="fas fa-award list-icon"></i> Долгосрочная гарантия на всю продукцию</li>
                        <li><i class="fas fa-money-check-alt list-icon"></i> Возможность оформления беспроцентной рассрочки</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <section class="consultation-section py-5 bg-accent-blue" id="consultation-form">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8">
                    <div class="content-card consultation-card text-center">
                        <h2 class="section-title text-white mb-4">Получите Бесплатную Консультацию</h2>
                        <p class="text-white-75 mb-4">Наш дизайнер свяжется с вами, ответит на все вопросы и поможет воплотить ваши идеи в жизнь.</p>
                        <form method="post" id="consultationForm" action="{% url 'main:consultation_submit' %}">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <input type="text" name="name" class="form-control-custom" placeholder="Ваше Имя" required>
                                </div>
                                <div class="col-md-6 mb-3">
                                   <input type="tel" name="phone" class="form-control-custom" placeholder="Номер Телефона" required
                                           pattern="[0-9]{10,15}" title="Пожалуйста, введите от 10 до 15 цифр." maxlength="15">
                                </div>
                            </div>
                            <div class="mb-3">
                                <textarea name="message" class="form-control-custom" rows="4" placeholder="Кратко опишите ваш запрос или предпочтения (необязательно)"></textarea>
                            </div>
                            <button type="submit" class="btn btn-white-outline">Отправить заявку</button>
                            <div id="formMessage" class="mt-3 text-white"></div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="testimonials-section py-5">
        <div class="container">
            <div class="text-center mb-5">
                <h2 class="section-title">Что Говорят Наши Клиенты</h2>
                <p class="section-subtitle">Довольные клиенты - лучшая реклама нашего мастерства.</p>
            </div>
            <div class="row">
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="testimonial-card">
                        <div class="stars">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"Заказывали кухню и шкафы. Результат превзошел все ожидания! Качество на высоте, а дизайнер учел все наши пожелания. Очень рекомендую!"</p>
                        <p class="testimonial-author">- Асель М.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="testimonial-card">
                        <div class="stars">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star-half-alt"></i>
                        </div>
                        <p class="testimonial-text">"Baizhigit Mebel – это синоним надежности и стиля. Сделали мебель для гостиной, все точно в срок и идеально вписалось в интерьер. Спасибо команде!"</p>
                        <p class="testimonial-author">- Данияр К.</p>
                    </div>
                </div>
                <div class="col-md-6 col-lg-4 mb-4">
                    <div class="testimonial-card">
                        <div class="stars">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <p class="testimonial-text">"Очень довольны работой. От замера до установки все было продумано до мелочей. Мебель выглядит дорого и служит прекрасно. Будем обращаться еще!"</p>
                        <p class="testimonial-author">- Елена Р.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    {# Секция FAQ - Часто задаваемые вопросы #}
    {% if faqs %}
        <section class="faq-section py-5" id="faq-section">
            <div class="container">
                <div class="text-center mb-5">
                    <h2 class="section-title">Часто задаваемые вопросы</h2>
                    <p class="section-subtitle">Найдите ответы на самые популярные вопросы о нашей мебели и услугах.</p>
                </div>
                <div class="accordion" id="faqAccordion"> {# ID для Bootstrap #}
                    {% for faq in faqs %}
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="heading{{ forloop.counter }}">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ forloop.counter }}" aria-expanded="false" aria-controls="collapse{{ forloop.counter }}">
                                {{ faq.question }}
                            </button>
                        </h2>
                        {# УДАЛЕНО: data-bs-parent="#faqAccordion" для независимого закрытия #}
                        {# УБРАНО: show класс, чтобы все начиналось закрытым #}
                        <div id="collapse{{ forloop.counter }}" class="accordion-collapse collapse" aria-labelledby="heading{{ forloop.counter }}">
                            <div class="accordion-body">
                                <p>{{ faq.answer|linebreaksbr }}</p>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </section>
    {% endif %}


    <section class="contacts-section py-5 bg-dark text-white">
        <div class="container text-center">
            <h2 class="section-title text-white mb-4">Контакты</h2>
            <p class="section-subtitle text-white-75 mb-5">Мы всегда на связи, чтобы помочь вам.</p>
            <div class="row justify-content-center">
                <div class="col-md-4 mb-4">
                    <div class="contact-item">
                        <a href="{{ site_settings.twogis_link }}" target="_blank" class="social-icon-link">
                            <i class="fas fa-map-marker-alt contact-icon"></i>
                            <p class="contact-text">Астана, Казахстан</p>
                            <p class="contact-small">{{ site_settings.address }}</p>
                        </a>
                    </div>
                </div>
                <div class="col-md-4 mb-4">
                    <div class="contact-item">
                        <i class="fas fa-phone contact-icon"></i>
                        <p class="contact-text">{{ site_settings.telephone_number }}</p>
                        <p class="contact-small">Позвоните нам</p>
                    </div>
                </div>
            </div>
            <div class="social-links mt-4">
                <a href="{{ site_settings.instagram_link }}" target="_blank" class="social-icon-link"><i class="fab fa-instagram"></i></a>
                <a href="{{ site_settings.whatsapp_link }}" target="_blank" class="social-icon-link"><i class="fab fa-whatsapp"></i></a>
            </div>
        </div>
    </section>


    <div class="modal fade" id="statusModal" tabindex="-1" aria-labelledby="statusModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="statusModalLabel">Статус заявки</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <div id="modalIcon" class="mb-3">
                        </div>
                    <p id="modalMessage" class="lead"></p>
                </div>
                <div class="modal-footer justify-content-center">
                    <button type="button" class="btn btn-primary-custom" data-bs-dismiss="modal">Закрыть</button>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block extra_js %}
    <script src="{% static 'js/consultation_ajax.js' %}"></script>
{% endblock %}
